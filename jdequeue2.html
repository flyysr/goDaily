<html>
    <head>
        <script src="./js/jquery-1.10.2.js"></script>
        <style>

            div {
                background: #aaa;
                width: 18px;
                height: 18px;
                position: absolute;
                top: 10px;
            }
        </style>
    </head>
    <body>

        <div id="block1">aaa</div>
        <script>
            // $("#block1").animate({left: "+=100"}, function(){
            //
		     //    $("#block1").animate({left: "-=100"}, function(){
		     //    	alert('stoped!');
            //     });
            //
            // });
            function next(){
	            var action = actions[ idx++ ];
	            action && action();
            };

            function first_async_action(){
            	setTimeout(function () {
		            console.log('first');
		            next();
	            }, 1000)

            }
            function second_async_action(){
	            setTimeout(function () {
		            console.log('second');
		            next();
	            }, 1000)

            }
            function third_async_action(){
	            setTimeout(function () {
		            console.log('third');
		            next();
	            }, 1000)

            }

            var idx = 0,
	            actions = [
		            function(){
			            third_async_action( next );
		            },
		            function(){
			            second_async_action( next );
		            },
		            function(){
			            first_async_action( next );
		            },

		            function(){
			            alert( 'done!' );
		            }
	            ];

            next();
        </script>
    </body>
</html>
